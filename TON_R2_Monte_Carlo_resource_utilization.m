clear all

%%%%%%%%%%%%%%%%%% DATA INPUT %%%%%%%%%%%%%%%%%%%%%
M1 = 100; N1 = 40; R = 3; M = 40; N = 40;
rev = ones(1,N1);
[capa1,capa2] = dataCapacity(M1);
% each FN is an Amazon EC2 instance
capacity = capa1; 

%basedemand = fullbasedemand(1:M,:,1:N);
%[M, R, N] = size(basedemand);
%K = M*R;
budget = ones(1,N);
cap = 600*ones(1,N); % cap is utility limit
capa = ones(M,R); % since basedemand is normalized 

T = 100;
for t=1:T
    [~,~,fullbasedemand,basedemand] = generateBaseDemandVector(M1,R,N1,M,N,capacity,rev);    
    [p1,u1,iu1,x1,demand1(:,:,t)] =  capLinearLeontief(budget,basedemand,capa,cap);
end
%demand2 = 
%bar(demand2(1:5,:))
mean_demand = mean(demand1,3);
bar(mean_demand(1:5,:))


%%%% Grouped boxplots matlab

d1 = []; d2 = []; d3 = []; d4= []; d5 =[];
for t=1:T
    % each row is the resource utilization in a run t (one problem instance)
    d1 = [d1;demand1(1,:,t)]; % resource utilization of FN1
    d2 = [d2;demand1(2,:,t)]; % resource utilization of FN2
    d3 = [d3;demand1(3,:,t)]; % resource utilization of FN3
    d4 = [d4;demand1(4,:,t)]; % resource utilization of FN4
    d5 = [d5;demand1(5,:,t)]; % resource utilization of FN5
end


% x: resource type 1 for the first 5 FNs.
x = cat(2,d1(:,1),d2(:,1),d3(:,1),d4(:,1),d5(:,1)); 
y = cat(2,d1(:,2),d2(:,2),d3(:,2),d4(:,2),d5(:,2)); 
z = cat(2,d1(:,3),d2(:,3),d3(:,3),d4(:,3),d5(:,3)); 

h = {x;y;z}; % Create a cell array with the data for each group

aboxplot(h,'labels',[1,2,3,4,5]); % Advanced box plot

%xlabel('$\mu$'); % Set the X-axis label
xlabel('FN');
ylabel('Utilization');
legend('Type 1','Type 2','Type 3');












%%%%%%%%%%T = 20 ; N=8 %%%%%%%%%%%%%%%%%%%


% mean_demand = [
%     0.8746    0.9001    0.9776
%     0.7379    0.7545    0.9982
%     0.7332    0.7404    0.9984
%     0.7379    0.7545    0.9982
%     0.7792    0.7941    0.9921
%     0.9371    0.9505    0.9381
%     0.7792    0.7941    0.9921
%     0.7306    0.7415    0.9979
%     0.8746    0.9001    0.9776
%     0.7306    0.7415    0.9979
%     0.7737    0.7888    0.9914
%     0.7737    0.7888    0.9914
%     0.9371    0.9505    0.9381
%     0.7332    0.7404    0.9984
%     0.8746    0.9001    0.9776
%     0.7379    0.7545    0.9982
%     0.7379    0.7545    0.9982
%     0.8709    0.8880    0.9882
%     0.7332    0.7404    0.9984
%     0.7332    0.7404    0.9984
%     0.7332    0.7404    0.9984
%     0.7792    0.7941    0.9921
%     0.7792    0.7941    0.9921
%     0.8709    0.8880    0.9882
%     0.8746    0.9001    0.9776
%     0.8746    0.9001    0.9776
%     0.9371    0.9505    0.9381
%     0.7379    0.7545    0.9982
%     0.7737    0.7888    0.9914
%     0.8746    0.9001    0.9776
%     0.7306    0.7415    0.9979
%     0.8746    0.9001    0.9776
%     0.8709    0.8880    0.9882
%     0.7379    0.7545    0.9982
%     0.9371    0.9505    0.9381
%     0.7332    0.7404    0.9984
%     0.8709    0.8880    0.9882
%     0.8709    0.8880    0.9882
%     0.7332    0.7404    0.9984
%     0.7379    0.7545    0.9982];
%      
% d1 = [    0.9073    1.0000    0.5558
%     0.8139    1.0000    0.9958
%     0.8951    0.8633    1.0000
%     0.7252    0.8892    1.0000
%     0.9548    0.9862    1.0000
%     1.0000    0.9897    1.0000
%     0.8774    0.9585    1.0000
%     0.7523    0.9224    1.0000
%     0.9252    0.9297    1.0000
%     0.8801    0.9083    1.0000
%     0.7293    0.8898    1.0000
%     0.9257    0.8164    1.0000
%     0.8651    0.8092    1.0000
%     0.8823    0.9228    1.0000
%     0.9195    0.9500    1.0000
%     0.8843    0.8355    1.0000
%     0.8495    0.8458    1.0000
%     1.0000    0.8559    1.0000
%     0.7751    0.7863    1.0000
%     0.9303    0.8440    1.0000];
% 
% d2 = [    0.9794    1.0000    0.9646
%     0.6306    1.0000    0.9997
%     0.7840    0.6807    1.0000
%     0.5494    0.8298    1.0000
%     0.9716    0.8251    1.0000
%     1.0000    0.9246    1.0000
%     0.7240    0.9968    1.0000
%     0.4775    0.7694    1.0000
%     0.7756    0.8628    1.0000
%     0.7882    0.8163    1.0000
%     0.4334    0.5758    1.0000
%     0.8862    0.6312    1.0000
%     0.6466    0.5542    1.0000
%     0.7886    0.8996    1.0000
%     0.7468    0.5557    1.0000
%     0.6479    0.5640    1.0000
%     0.7817    0.7222    1.0000
%     1.0000    0.8272    1.0000
%     0.5203    0.5364    1.0000
%     0.6268    0.5183    1.0000];
% 
% d3 = [    0.9656    1.0000    0.9685
%     0.6522    1.0000    0.9992
%     0.7661    0.6411    1.0000
%     0.5852    0.8226    1.0000
%     0.9560    0.7755    1.0000
%     1.0000    0.8933    1.0000
%     0.7643    0.9941    1.0000
%     0.4554    0.6825    1.0000
%     0.7955    0.8372    1.0000
%     0.7529    0.7232    1.0000
%     0.4181    0.5394    1.0000
%     0.8631    0.6505    1.0000
%     0.6770    0.5950    1.0000
%     0.7622    0.8581    1.0000
%     0.6985    0.5508    1.0000
%     0.6767    0.6291    1.0000
%     0.7778    0.7666    1.0000
%     1.0000    0.8121    1.0000
%     0.5213    0.5303    1.0000
%     0.5752    0.5064    1.0000];
% 
% d4 = [    0.9794    1.0000    0.9646
%     0.6306    1.0000    0.9997
%     0.7840    0.6807    1.0000
%     0.5494    0.8298    1.0000
%     0.9716    0.8251    1.0000
%     1.0000    0.9246    1.0000
%     0.7240    0.9968    1.0000
%     0.4775    0.7694    1.0000
%     0.7756    0.8628    1.0000
%     0.7882    0.8163    1.0000
%     0.4334    0.5758    1.0000
%     0.8862    0.6312    1.0000
%     0.6466    0.5542    1.0000
%     0.7886    0.8996    1.0000
%     0.7468    0.5557    1.0000
%     0.6479    0.5640    1.0000
%     0.7817    0.7222    1.0000
%     1.0000    0.8272    1.0000
%     0.5203    0.5364    1.0000
%     0.6268    0.5183    1.0000];
% 
% 
% d5 = [
%     0.9429    1.0000    0.8438
%     0.6829    1.0000    0.9984
%     0.8256    0.7224    1.0000
%     0.6444    0.8494    1.0000
%     0.9314    0.8331    1.0000
%     1.0000    0.9077    1.0000
%     0.7781    0.9873    1.0000
%     0.5636    0.7887    1.0000
%     0.8268    0.8626    1.0000
%     0.7881    0.8038    1.0000
%     0.5175    0.6596    1.0000
%     0.8767    0.6881    1.0000
%     0.7547    0.6894    1.0000
%     0.7868    0.8763    1.0000
%     0.7894    0.6915    1.0000
%     0.7590    0.6888    1.0000
%     0.8082    0.8001    1.0000
%     1.0000    0.7998    1.0000
%     0.6060    0.5992    1.0000
%     0.7029    0.6345    1.0000];
% 


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% N  = 40
% 
% mean_demand = [
%     0.9109    0.9284    1.0000
%     0.9751    0.9826    1.0000
%     0.8645    0.8945    1.0000
%     0.8645    0.8945    1.0000
%     0.8691    0.8969    1.0000
%     0.8645    0.8945    1.0000
%     0.8691    0.8969    1.0000
%     0.9496    0.9643    1.0000
%     0.9109    0.9284    1.0000
%     0.9653    0.9748    1.0000
%     0.9109    0.9284    1.0000
%     0.9751    0.9826    1.0000
%     0.8691    0.8969    1.0000
%     0.8888    0.9160    1.0000
%     0.9496    0.9643    1.0000
%     0.8645    0.8945    1.0000
%     0.9496    0.9643    1.0000
%     0.9751    0.9826    1.0000
%     0.8645    0.8945    1.0000
%     0.9109    0.9284    1.0000
%     0.9496    0.9643    1.0000
%     0.9109    0.9284    1.0000
%     0.8691    0.8969    1.0000
%     0.9109    0.9284    1.0000
%     0.9109    0.9284    1.0000
%     0.8645    0.8945    1.0000
%     0.9109    0.9284    1.0000
%     0.8732    0.9054    1.0000
%     0.8645    0.8945    1.0000
%     0.8888    0.9160    1.0000
%     0.8888    0.9160    1.0000
%     0.8732    0.9054    1.0000
%     0.9653    0.9748    1.0000
%     0.8732    0.9054    1.0000
%     0.8888    0.9160    1.0000
%     0.9653    0.9748    1.0000
%     0.9496    0.9643    1.0000
%     0.8645    0.8945    1.0000
%     0.8888    0.9160    1.0000
%     0.8691    0.8969    1.0000];
% 
% d1 =[  0.9651    0.8682    1.0000
%     1.0000    0.9844    1.0000
%     0.7866    0.7447    1.0000
%     0.9469    1.0000    1.0000
%     0.7820    0.8308    1.0000
%     0.9745    0.9076    1.0000
%     0.9573    0.9951    1.0000
%     0.9220    1.0000    1.0000
%     0.9334    1.0000    1.0000
%     1.0000    0.8330    1.0000
%     0.7929    0.8434    1.0000
%     0.9553    1.0000    1.0000
%     0.8698    1.0000    1.0000
%     0.8372    0.9984    1.0000
%     0.8383    0.9560    1.0000
%     1.0000    1.0000    1.0000
%     0.8530    0.7765    1.0000
%     0.8599    1.0000    1.0000
%     0.9429    0.9643    1.0000
%     1.0000    0.8660    1.0000];
% 
% d2 = [    0.9763    0.9791    1.0000
%     1.0000    0.9721    1.0000
%     0.9620    0.9651    1.0000
%     0.9650    1.0000    1.0000
%     0.9810    0.9761    1.0000
%     0.9704    0.9742    1.0000
%     0.9694    0.9815    1.0000
%     0.9710    1.0000    1.0000
%     0.9709    1.0000    1.0000
%     1.0000    0.9728    1.0000
%     0.9655    0.9638    1.0000
%     0.9792    1.0000    1.0000
%     0.9595    1.0000    1.0000
%     0.9753    0.9893    1.0000
%     0.9447    0.9791    1.0000
%     1.0000    1.0000    1.0000
%     0.9804    0.9783    1.0000
%     0.9632    1.0000    1.0000
%     0.9689    0.9714    1.0000
%     1.0000    0.9484    1.0000];
% 
% 
% d3 =[
%     0.9245    0.8037    1.0000
%     1.0000    0.9675    1.0000
%     0.6971    0.6691    1.0000
%     0.9071    1.0000    1.0000
%     0.7129    0.7509    1.0000
%     0.9480    0.8501    1.0000
%     0.9095    0.9897    1.0000
%     0.8779    1.0000    1.0000
%     0.8764    1.0000    1.0000
%     1.0000    0.7888    1.0000
%     0.6964    0.7376    1.0000
%     0.9243    1.0000    1.0000
%     0.8224    1.0000    1.0000
%     0.7880    0.9964    1.0000
%     0.7583    0.8954    1.0000
%     1.0000    1.0000    1.0000
%     0.7609    0.7007    1.0000
%     0.7956    1.0000    1.0000
%     0.8909    0.9253    1.0000
%     1.0000    0.8156    1.0000];
% 
% d4 = [
%     0.9245    0.8037    1.0000
%     1.0000    0.9675    1.0000
%     0.6971    0.6691    1.0000
%     0.9071    1.0000    1.0000
%     0.7129    0.7509    1.0000
%     0.9480    0.8501    1.0000
%     0.9095    0.9897    1.0000
%     0.8779    1.0000    1.0000
%     0.8764    1.0000    1.0000
%     1.0000    0.7888    1.0000
%     0.6964    0.7376    1.0000
%     0.9243    1.0000    1.0000
%     0.8224    1.0000    1.0000
%     0.7880    0.9964    1.0000
%     0.7583    0.8954    1.0000
%     1.0000    1.0000    1.0000
%     0.7609    0.7007    1.0000
%     0.7956    1.0000    1.0000
%     0.8909    0.9253    1.0000
%     1.0000    0.8156    1.0000];
% 
% 
% d5 =[    0.9301    0.8152    1.0000
%     1.0000    0.9714    1.0000
%     0.6889    0.6546    1.0000
%     0.9105    1.0000    1.0000
%     0.7068    0.7512    1.0000
%     0.9520    0.8615    1.0000
%     0.9191    0.9909    1.0000
%     0.8814    1.0000    1.0000
%     0.8849    1.0000    1.0000
%     1.0000    0.7973    1.0000
%     0.7114    0.7420    1.0000
%     0.9286    1.0000    1.0000
%     0.8308    1.0000    1.0000
%     0.7959    0.9969    1.0000
%     0.7687    0.8998    1.0000
%     1.0000    1.0000    1.0000
%     0.7646    0.7091    1.0000
%     0.8108    1.0000    1.0000
%     0.8970    0.9285    1.0000
%     1.0000    0.8207    1.0000];
